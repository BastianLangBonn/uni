#include <stdio.h>
#include "constants.c"

int currentBrakeActivation = 0;

void *brakeThreadPtr(void *arg){
    while(1){
	    currentBrakeActivation = readBrakeSensors();	
	    delay(SENSOR_UPDATE); //no busy-waiting	
    }
    #ifdef DEBUG
        printf("Brake Thread ended\n"); 
    #endif
}


/**
* Reads the GPIO-PINs and returns if at least one of them indicates an 
* activated brake.
*/
int readBrakeSensors(){

    if(digitalRead(GPIO_BRAKE1) == 0){
        return 1;
    }
    
    #ifdef BRAKE2	
        if(digitalRead(GPIO_BRAKE2) == 0){
            return 1;
        }   
    #endif
    
    return 0;    
}
